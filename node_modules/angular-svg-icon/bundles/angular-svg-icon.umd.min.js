!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("rxjs"),require("rxjs/operators"),require("@angular/common"),require("@angular/common/http"),require("@angular/core")):"function"==typeof define&&define.amd?define("angular-svg-icon",["exports","rxjs","rxjs/operators","@angular/common","@angular/common/http","@angular/core"],e):e(t["angular-svg-icon"]={},t.rxjs,t.rxjs.operators,t.ng.common,t.ng.common.http,t.ng.core)}(this,function(t,i,o,r,e,s){"use strict";var c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};var n=function d(){},a=function(r){function t(t){var e=r.call(this)||this;return e.http=t,e}return function n(t,e){function r(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(t,r),t.prototype.getSvg=function(t){return this.http.get(t,{responseType:"text"})},t.decorators=[{type:s.Injectable}],t.ctorParameters=function(){return[{type:e.HttpClient}]},t}(n),u=new s.InjectionToken("SERVER_URL"),p=function(){function t(t,e,r,n){this.loader=t,this.platformId=e,this.serverUrl=r,this._document=n,this.iconsByUrl=new Map,this.iconsLoadingByUrl=new Map,this.document=this._document}return t.prototype.addSvg=function(t,e){if(!this.iconsByUrl.has(t)){var r=this.document.createElement("DIV");r.innerHTML=e;var n=r.querySelector("svg");this.iconsByUrl.set(t,n)}},t.prototype.loadSvg=function(t,e){var r=this;if(void 0===e&&(e=t),this.serverUrl&&null===t.match(/^(http(s)?):/)&&(t=this.serverUrl+t,e=t),this.iconsByUrl.has(e))return i.of(this.iconsByUrl.get(e));if(this.iconsLoadingByUrl.has(e))return this.iconsLoadingByUrl.get(e);var n=this.loader.getSvg(t).pipe(o.map(function(t){var e=r.document.createElement("DIV");return e.innerHTML=t,e.querySelector("svg")}),o.tap(function(t){return r.iconsByUrl.set(e,t)}),o.catchError(function(t){return console.error(t),i.throwError(t)}),o.finalize(function(){return r.iconsLoadingByUrl["delete"](e)}),o.share());return this.iconsLoadingByUrl.set(e,n),n},t.prototype.getSvgByName=function(t){return this.iconsByUrl.has(t)?i.of(this.iconsByUrl.get(t)):this.iconsLoadingByUrl.has(t)?this.iconsLoadingByUrl.get(t):i.throwError("No svg with name '"+t+"' has been loaded")},t.prototype.unloadSvg=function(t){this.iconsByUrl.has(t)&&this.iconsByUrl["delete"](t)},t.decorators=[{type:s.Injectable}],t.ctorParameters=function(){return[{type:n},{type:Object,decorators:[{type:s.Inject,args:[s.PLATFORM_ID]}]},{type:String,decorators:[{type:s.Optional},{type:s.Inject,args:[u]}]},{type:undefined,decorators:[{type:s.Optional},{type:s.Inject,args:[r.DOCUMENT]}]}]},t}();function h(t,e,r,n,i){return t||new p(e,r,n,i)}var l={provide:p,deps:[[new s.Optional,new s.SkipSelf,p],n,[s.PLATFORM_ID],[new s.Optional,u],[new s.Optional,r.DOCUMENT]],useFactory:h},f=function(){function t(t,e,r,n,i){this.element=t,this.differs=e,this.renderer=r,this.iconReg=n,this.cdr=i,this.stretch=!1,this.applyCss=!1}return Object.defineProperty(t.prototype,"svgStyle",{set:function(t){this._svgStyle=t,!this.differ&&t&&(this.differ=this.differs.find(t).create())},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this.init()},t.prototype.ngOnDestroy=function(){this.destroy()},t.prototype.ngOnChanges=function(t){(t.src||t.name)&&(this.svg&&this.destroy(),this.init()),t.stretch&&this.stylize()},t.prototype.ngDoCheck=function(){if(this.svg&&this.differ){var t=this.differ.diff(this._svgStyle);t&&this.applyChanges(t)}},t.prototype.init=function(){this.name?this.icnSub=this.iconReg.getSvgByName(this.name).subscribe(this.initSvg.bind(this)):this.icnSub=this.iconReg.loadSvg(this.src).subscribe(this.initSvg.bind(this))},t.prototype.initSvg=function(t){this.setSvg(t),this.resetDiffer()},t.prototype.destroy=function(){this.svg=undefined,this.differ=undefined,this.icnSub&&this.icnSub.unsubscribe()},t.prototype.resetDiffer=function(){this._svgStyle&&!this.differ&&(this.differ=this.differs.find(this._svgStyle).create())},t.prototype.setSvg=function(t){if(t){var e=(this.svg=t).cloneNode(!0),r=this.element.nativeElement;this.applyCss&&this.copyNgContentAttribute(r,e),r.innerHTML="",this.renderer.appendChild(r,e),this.stylize(),this.cdr.markForCheck()}},t.prototype.copyNgContentAttribute=function(t,e){for(var r=t.attributes,n=r.length,i=0;i<n;i+=1){var o=r.item(i);if(o.name.startsWith("_ngcontent")){this.setNgContentAttribute(e,o.name);break}}},t.prototype.setNgContentAttribute=function(t,e){this.renderer.setAttribute(t,e,"");for(var r=t.childNodes.length,n=0;n<r;n+=1){var i=t.childNodes[n];i instanceof Element&&this.setNgContentAttribute(i,e)}},t.prototype.stylize=function(){if(this.svg){var t=this.element.nativeElement.firstChild;!0===this.stretch?this.renderer.setAttribute(t,"preserveAspectRatio","none"):!1===this.stretch&&this.renderer.removeAttribute(t,"preserveAspectRatio")}},t.prototype.applyChanges=function(t){var e=this;t.forEachRemovedItem(function(t){return e.setStyle(t.key,null)}),t.forEachAddedItem(function(t){return e.setStyle(t.key,t.currentValue)}),t.forEachChangedItem(function(t){return e.setStyle(t.key,t.currentValue)})},t.prototype.setStyle=function(t,e){var r=function a(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(n=o.next()).done;)s.push(n.value)}catch(c){i={error:c}}finally{try{n&&!n.done&&(r=o["return"])&&r.call(o)}finally{if(i)throw i.error}}return s}(t.split("."),2),n=r[0],i=r[1];e=null!==e&&i?""+e+i:e;var o=this.element.nativeElement.firstChild;null!==e?this.renderer.setStyle(o,n,e):this.renderer.removeStyle(o,n)},t.decorators=[{type:s.Component,args:[{selector:"svg-icon",template:"<ng-content></ng-content>"}]}],t.ctorParameters=function(){return[{type:s.ElementRef},{type:s.KeyValueDiffers},{type:s.Renderer2},{type:p},{type:s.ChangeDetectorRef}]},t.propDecorators={src:[{type:s.Input}],name:[{type:s.Input}],stretch:[{type:s.Input}],applyCss:[{type:s.Input}],svgStyle:[{type:s.Input}]},t}(),y=function(){function e(){}return e.forRoot=function(t){return void 0===t&&(t={}),{ngModule:e,providers:[t.loader||{provide:n,useClass:a},l]}},e.decorators=[{type:s.NgModule,args:[{imports:[r.CommonModule],declarations:[f],providers:[l,{provide:n,useClass:a}],exports:[f]}]}],e}();t.AngularSvgIconModule=y,t.SVG_ICON_REGISTRY_PROVIDER_FACTORY=h,t.SERVER_URL=u,t.SvgIconRegistryService=p,t.SVG_ICON_REGISTRY_PROVIDER=l,t.SvgIconComponent=f,t.SvgLoader=n,t.SvgHttpLoader=a,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=angular-svg-icon.umd.min.js.map